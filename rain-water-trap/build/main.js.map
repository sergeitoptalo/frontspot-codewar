{"version":3,"sources":["webpack:///webpack/bootstrap 9d12d0d75b1fcc99e99f","webpack:///./src/index.js","webpack:///./src/wall.js","webpack:///./src/controls.js"],"names":["document","addEventListener","runButton","querySelector","container","initialColumnsNumber","value","App","columnsNumber","state","emptyRow","controls","render","renderInitialState","waterConfig","rowFirstStoneIndex","rowLastStoneIndex","forEach","row","index","push","element","elIndex","i","columnIndex","currentColumn","wallTopBorderIndex","indexOf","length","unshift","concat","innerHTML","map","join","Controls","wall","controlsContainer","event","detectClickTarget","target","dataset","action","addStone","parentNode","column","removeStone","controlsMarkup"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;AC7DA;;;;;;AAEAA,SAASC,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM;AAChD;;AAEA,QAAIC,YAAYF,SAASG,aAAT,CAAuB,aAAvB,CAAhB;;AAGA;;AAEA,QAAIC,YAAYJ,SAASG,aAAT,CAAuB,YAAvB,CAAhB;;AAEAD,cAAUD,gBAAV,CAA2B,OAA3B,EAAoC,YAAM;AACtC,YAAII,uBAAuBL,SAASG,aAAT,CAAuB,iBAAvB,EAA0CG,KAArE;AACA,2BAASD,oBAAT,EAA+BD,SAA/B;AACH,KAHD;AAIH,CAdD,E;;;;;;;;;;;;;;;ACFA;;;;;;;;IAEqBG,G;AACjB,iBAAYC,aAAZ,EAA2BJ,SAA3B,EAAsC;AAAA;;AAClC,aAAKK,KAAL,GAAa,EAAb;AACA,aAAKC,QAAL,GAAgB,EAAhB;AACA,aAAKN,SAAL,GAAiBA,SAAjB;AACA,aAAKO,QAAL,GAAgB,uBAAa,IAAb,EAAmBH,aAAnB,EAAkCI,MAAlC,EAAhB;AACA,aAAKC,kBAAL,CAAwBL,aAAxB;AACH;;;;+BAEM;AAAA;;AACH,gBAAIM,cAAc,EAAlB;AACA,gBAAIC,qBAAqB,IAAzB;AACA,gBAAIC,oBAAoB,IAAxB;AACA,iBAAKP,KAAL,CAAWQ,OAAX,CAAmB,UAACC,GAAD,EAAMC,KAAN,EAAgB;AAC/BL,4BAAYM,IAAZ,CAAiB,EAAjB;AACAF,oBAAID,OAAJ,CAAY,UAACI,OAAD,EAAUC,OAAV,EAAsB;AAC9B,wBAAID,YAAY,CAAZ,IAAiBN,uBAAuB,IAA5C,EAAkD;AAC9CA,6CAAqBO,OAArB;AACH;AACD,wBAAID,YAAY,CAAZ,IAAiBN,uBAAuB,IAAxC,IAAgDO,YAAYP,kBAAhE,EAAoF;AAChFC,4CAAoBM,OAApB;AACA,6BAAK,IAAIC,IAAIP,oBAAoB,CAAjC,EAAoCO,IAAIR,kBAAxC,EAA4DQ,GAA5D,EAAiE;AAC7DT,wCAAYK,KAAZ,EAAmBC,IAAnB,CAAwBG,CAAxB;AACH;AACDR,6CAAqBC,iBAArB;AACAA,4CAAoB,IAApB;AACH;AACJ,iBAZD;AAaA,oBAAI,CAACF,YAAYK,KAAZ,CAAL,EAAyB;AACrBL,gCAAYK,KAAZ,IAAqB,IAArB;AACH;AACDJ,qCAAqB,IAArB;AACAC,oCAAoB,IAApB;AACH,aApBD;;AAsBAF,wBAAYG,OAAZ,CAAoB,UAACC,GAAD,EAAMC,KAAN,EAAgB;AAChC,oBAAID,GAAJ,EAAS;AACLA,wBAAID,OAAJ,CAAY,mBAAW;AACnB,8BAAKR,KAAL,CAAWU,KAAX,EAAkBE,OAAlB,IAA6B,CAA7B;AACH,qBAFD;AAGA,0BAAKZ,KAAL,CAAWW,IAAX,CAAgB,MAAKV,QAArB;AACH;AACJ,aAPD;;AASA,iBAAKE,MAAL;AACH;;;iCAEQY,W,EAAa;AAClB,gBAAIf,QAAQ,KAAKA,KAAjB;AACA,gBAAIgB,gBAAgB,EAApB;AACAhB,kBAAMQ,OAAN,CAAc,eAAO;AACjBQ,8BAAcL,IAAd,CAAmBF,IAAIM,WAAJ,CAAnB;AACH,aAFD;AAGA,gBAAIE,qBAAqBD,cAAcE,OAAd,CAAsB,CAAtB,CAAzB;AACA,gBAAID,uBAAuB,CAAC,CAA5B,EAA+B;AAC3B,oBAAIA,uBAAuB,KAAKjB,KAAL,CAAWmB,MAAX,GAAoB,CAA/C,EAAkD;AAC9C,yBAAKnB,KAAL,CAAWoB,OAAX,CAAmB,GAAGC,MAAH,CAAU,KAAKpB,QAAf,CAAnB;AACH;AAEJ;AACD,iBAAKD,KAAL,CAAWiB,qBAAqB,CAAhC,EAAmCF,WAAnC,IAAkD,CAAlD;AACA,iBAAKZ,MAAL;AACH;;;oCAEWY,W,EAAa,CAExB;;;2CAEkBhB,a,EAAe;AAC9B,iBAAK,IAAIe,IAAI,CAAb,EAAgBA,KAAKf,aAArB,EAAoCe,GAApC,EAAyC;AACrC,qBAAKb,QAAL,CAAcU,IAAd,CAAmB,CAAnB;AACH;AACD,iBAAKX,KAAL,CAAWW,IAAX,CAAgB,GAAGU,MAAH,CAAU,KAAKpB,QAAf,CAAhB;AACA,iBAAKE,MAAL;AACH;;;iCAEQ;AACLR,sBAAU2B,SAAV,mCAEE,KAAKtB,KAAL,CAAWuB,GAAX,CAAe,eAAO;AAChB,sDAEId,IAAIc,GAAJ,CAAQ,mBAAW;AACf,qCAAcX,YAAY,CAAZ,gBAA0BA,YAAY,CAAZ,mBAA1B,YAAd;AACH,iBAFD,EAEGY,IAFH,CAEQ,EAFR,CAFJ;AAOH,aARH,EAQKA,IARL,CAQU,EARV,CAFF;AAcH;;;;;;kBA3FgB1B,G;;;;;;;;;;;;;;;;;ICFA2B,Q;AACjB,sBAAYC,IAAZ,EAAkB3B,aAAlB,EAAiC;AAAA;;AAAA;;AAC7B,aAAK2B,IAAL,GAAYA,IAAZ;AACA,aAAK3B,aAAL,GAAqBA,aAArB;AACA,aAAK4B,iBAAL,GAAyBpC,SAASG,aAAT,CAAuB,qBAAvB,CAAzB;AACA,aAAKiC,iBAAL,CAAuBnC,gBAAvB,CAAwC,OAAxC,EAAiD,UAACoC,KAAD;AAAA,mBAAW,MAAKC,iBAAL,CAAuBD,KAAvB,CAAX;AAAA,SAAjD;AACH;;;;0CAEiBA,K,EAAO;AACrB,gBAAIE,SAASF,MAAME,MAAnB;AACA,gBAAIA,OAAOC,OAAX,EAAoB;AAChB,oBAAIC,SAASF,OAAOC,OAAP,CAAeC,MAA5B;AACA,wBAAOA,MAAP;AACI,yBAAK,UAAL;AAAiB;AACb,iCAAKN,IAAL,CAAUO,QAAV,CAAmBH,OAAOI,UAAP,CAAkBH,OAAlB,CAA0BI,MAA7C;AACA;AACH;;AAED,yBAAK,QAAL;AAAe;AACX,iCAAKT,IAAL,CAAUU,WAAV,CAAsBN,OAAOC,OAAP,CAAeI,MAArC;AACA;AACH;AACD;AAAS;AAVb;AAaH;AAEJ;;;iCAEQ;AACL,gBAAIE,mBAAJ;AACA,iBAAK,IAAIvB,IAAI,CAAb,EAAgBA,KAAK,KAAKf,aAA1B,EAAyCe,GAAzC,EAA8C;AAC1CuB,kEACevB,CADf;AAKH;AACD,iBAAKa,iBAAL,CAAuBL,SAAvB,6DAGUe,cAHV;AAOH;;;;;;kBA7CgBZ,Q","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/assets/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9d12d0d75b1fcc99e99f","import Wall from './wall.js';\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    //const elevationMap = [1, 0, 2, 3, 5, 6, 8, 7, 6, 0, 0, 0];\r\n\r\n    let runButton = document.querySelector('#run-button');\r\n\r\n\r\n    //runButton.addEventListener();\r\n\r\n    let container = document.querySelector('#container');\r\n\r\n    runButton.addEventListener('click', () => {\r\n        let initialColumnsNumber = document.querySelector('#columns-number').value;\r\n        new Wall(initialColumnsNumber, container)\r\n    });\r\n})\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import Controls from './controls.js';\r\n\r\nexport default class App {\r\n    constructor(columnsNumber, container) {\r\n        this.state = [];\r\n        this.emptyRow = [];\r\n        this.container = container;\r\n        this.controls = new Controls(this, columnsNumber).render();\r\n        this.renderInitialState(columnsNumber);\r\n    }\r\n\r\n    rain() {\r\n        let waterConfig = [];\r\n        let rowFirstStoneIndex = null;\r\n        let rowLastStoneIndex = null;\r\n        this.state.forEach((row, index) => {\r\n            waterConfig.push([]);\r\n            row.forEach((element, elIndex) => {\r\n                if (element === 1 && rowFirstStoneIndex === null) {\r\n                    rowFirstStoneIndex = elIndex;\r\n                }\r\n                if (element === 1 && rowFirstStoneIndex !== null && elIndex !== rowFirstStoneIndex) {\r\n                    rowLastStoneIndex = elIndex;\r\n                    for (let i = rowLastStoneIndex - 1; i > rowFirstStoneIndex; i--) {\r\n                        waterConfig[index].push(i);\r\n                    }\r\n                    rowFirstStoneIndex = rowLastStoneIndex;\r\n                    rowLastStoneIndex = null;\r\n                }\r\n            })\r\n            if (!waterConfig[index]) {\r\n                waterConfig[index] = null;\r\n            }\r\n            rowFirstStoneIndex = null;\r\n            rowLastStoneIndex = null;\r\n        })\r\n\r\n        waterConfig.forEach((row, index) => {\r\n            if (row) {\r\n                row.forEach(element => {\r\n                    this.state[index][element] = 2;\r\n                })\r\n                this.state.push(this.emptyRow);\r\n            }\r\n        })\r\n\r\n        this.render();\r\n    }\r\n\r\n    addStone(columnIndex) {\r\n        let state = this.state;\r\n        let currentColumn = [];\r\n        state.forEach(row => {\r\n            currentColumn.push(row[columnIndex]);\r\n        })\r\n        let wallTopBorderIndex = currentColumn.indexOf(1);\r\n        if (wallTopBorderIndex !== -1) {\r\n            if (wallTopBorderIndex === this.state.length - 1) {\r\n                this.state.unshift([].concat(this.emptyRow));\r\n            }\r\n            \r\n        }\r\n        this.state[wallTopBorderIndex + 1][columnIndex] = 1;\r\n        this.render();\r\n    }\r\n\r\n    removeStone(columnIndex) {\r\n\r\n    }\r\n\r\n    renderInitialState(columnsNumber) {\r\n        for (let i = 0; i <= columnsNumber; i++) {\r\n            this.emptyRow.push(0);\r\n        }\r\n        this.state.push([].concat(this.emptyRow));\r\n        this.render();\r\n    }\r\n\r\n    render() {\r\n        container.innerHTML = `\r\n        <table>\r\n        ${this.state.map(row => {\r\n                return `<tr>\r\n                    ${\r\n                    row.map(element => {\r\n                        return `<td ${element !== 0 ? `class=\"${element === 1 ? `wall` : `water`}\"` : ``}></td>`;\r\n                    }).join('')\r\n                    }\r\n                </tr>`\r\n            }).join('')}\r\n          \r\n        </table>\r\n      `\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/wall.js","export default class Controls {\r\n    constructor(wall, columnsNumber) {\r\n        this.wall = wall;\r\n        this.columnsNumber = columnsNumber;\r\n        this.controlsContainer = document.querySelector('#controls-container');\r\n        this.controlsContainer.addEventListener('click', (event) => this.detectClickTarget(event))\r\n    }\r\n\r\n    detectClickTarget(event) {\r\n        let target = event.target;\r\n        if (target.dataset) {\r\n            let action = target.dataset.action;\r\n            switch(action) {\r\n                case 'increase': {\r\n                    this.wall.addStone(target.parentNode.dataset.column);\r\n                    break;\r\n                };\r\n\r\n                case 'reduce': {\r\n                    this.wall.removeStone(target.dataset.column);\r\n                    break;\r\n                };\r\n                default: break;\r\n            }\r\n            \r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n        let controlsMarkup = ``;\r\n        for (let i = 0; i <= this.columnsNumber; i++) {\r\n            controlsMarkup += `\r\n        <td data-column=\"${i}\">\r\n            <button data-action=\"increase\">+</button>\r\n            <button data-action=\"reduce\">-</button>\r\n        </td>`\r\n        }\r\n        this.controlsContainer.innerHTML = `\r\n        <table>\r\n            <tr>\r\n                ${controlsMarkup}\r\n            </tr>\r\n        </table>\r\n    `\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/controls.js"],"sourceRoot":""}