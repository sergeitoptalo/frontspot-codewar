{"version":3,"sources":["webpack:///webpack/bootstrap 97ad17eb90b5988119cd","webpack:///./src/index.js","webpack:///./src/wall.js","webpack:///./src/controls.js"],"names":["document","addEventListener","runButton","querySelector","container","initialColumnsNumber","value","Wall","columnsNumber","state","row","controls","render","addNewRow","forEach","rowIndex","rowArray","firstStoneIndex","lastStoneIndex","element","index","array","length","stoneIndex","splice","i","push","columnIndex","wallBorder","innerHTML","map","join","reverse","Controls","wall","controlsContainer","event","detectClickTarget","target","dataset","action","addStone","parentNode","column","removeStone","rain","controlsMarkup"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/assets/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 97ad17eb90b5988119cd","import Wall from './wall.js';\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    //const elevationMap = [1, 0, 2, 3, 5, 6, 8, 7, 6, 0, 0, 0];\r\n\r\n    let runButton = document.querySelector('#run-button');\r\n\r\n\r\n    //runButton.addEventListener();\r\n\r\n    let container = document.querySelector('#container');\r\n\r\n    runButton.addEventListener('click', () => {\r\n        let initialColumnsNumber = document.querySelector('#columns-number').value;\r\n        new Wall(initialColumnsNumber, container);\r\n    });\r\n})\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import Controls from './controls.js';\r\n\r\nexport default class Wall {\r\n    constructor(columnsNumber, container) {\r\n        this.state = [];\r\n        // this.emptyRow = [];\r\n        this.row = [];\r\n        this.columnsNumber = columnsNumber;\r\n        this.container = container;\r\n        this.controls = new Controls(this, columnsNumber).render();\r\n        this.addNewRow();\r\n        this.render();\r\n    }\r\n\r\n    rain() {\r\n        this.state.forEach((row, rowIndex, rowArray) => {\r\n            let firstStoneIndex = null;\r\n            let lastStoneIndex = null;\r\n\r\n            row.forEach((element, index, array) => {\r\n                if (index !== 0 || index !== array.length - 1) {\r\n                    if (array[index - 1] === 1 && array[index + 1] === 1) {\r\n                        array[index] = -1;\r\n                    }\r\n                }\r\n            })\r\n        })\r\n        /*         let waterConfig = [];\r\n                let rowFirstStoneIndex = null;\r\n                let rowLastStoneIndex = null;\r\n                this.state.forEach((row, index) => {\r\n                    waterConfig.push([]);\r\n                    row.forEach((element, elIndex) => {\r\n                        if (element === 1 && rowFirstStoneIndex === null) {\r\n                            rowFirstStoneIndex = elIndex;\r\n                        }\r\n                        if (element === 1 && rowFirstStoneIndex !== null && elIndex !== rowFirstStoneIndex) {\r\n                            rowLastStoneIndex = elIndex;\r\n                            for (let i = rowLastStoneIndex - 1; i > rowFirstStoneIndex; i--) {\r\n                                waterConfig[index].push(i);\r\n                            }\r\n                            rowFirstStoneIndex = rowLastStoneIndex;\r\n                            rowLastStoneIndex = null;\r\n                        }\r\n                    })\r\n                    if (!waterConfig[index]) {\r\n                        waterConfig[index] = null;\r\n                    }\r\n                    rowFirstStoneIndex = null;\r\n                    rowLastStoneIndex = null;\r\n                })\r\n        \r\n                waterConfig.forEach((row, index) => {\r\n                    if (row) {\r\n                        row.forEach(element => {\r\n                            this.state[index][element] = 2;\r\n                        })\r\n                    }\r\n                }) */\r\n\r\n        this.render();\r\n    }\r\n\r\n    addNewRow(stoneIndex) {\r\n        this.row.splice(0, this.row.length);\r\n        for (let i = 0; i < this.columnsNumber; i++) {\r\n            this.row.push(0);\r\n        }\r\n\r\n        if (stoneIndex) {\r\n            this.row[stoneIndex] = 1;\r\n        }\r\n\r\n        this.state.push([...this.row]);\r\n    }\r\n\r\n    addStone(columnIndex) {\r\n        let wallBorder = 0;\r\n        this.state.forEach((row, index, array) => {\r\n            if (row[columnIndex] && index === array.length - 1) {\r\n                this.addNewRow(columnIndex);\r\n            }\r\n            if (!row[columnIndex] && !wallBorder) {\r\n                row[columnIndex] = 1;\r\n                wallBorder = 1;\r\n            }\r\n        });\r\n\r\n        this.render();\r\n    }\r\n\r\n    removeStone(columnIndex) {\r\n\r\n    }\r\n\r\n    render() {\r\n        container.innerHTML = `\r\n        <table>\r\n        ${this.state.map(row => {\r\n                return `<tr>\r\n                    ${\r\n                    row.map(element => {\r\n                        return `<td ${element !== 0 ? `class=\"${element === 1 ? `wall` : `water`}\"` : ``}></td>`;\r\n                    }).join('')\r\n                    }\r\n                </tr>`\r\n            }).reverse().join('')}\r\n        </table>\r\n      `\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/wall.js","export default class Controls {\r\n    constructor(wall, columnsNumber) {\r\n        this.wall = wall;\r\n        this.columnsNumber = columnsNumber;\r\n        this.controlsContainer = document.querySelector('#controls-container');\r\n        this.controlsContainer.addEventListener('click', (event) => this.detectClickTarget(event));\r\n    }\r\n\r\n    detectClickTarget(event) {\r\n        let target = event.target;\r\n        if (target.dataset) {\r\n            let action = target.dataset.action;\r\n            switch(action) {\r\n                case 'increase': {\r\n                    //target.parentNode.dataset.wallLevel++;\r\n                    this.wall.addStone(target.parentNode.dataset.column);\r\n\r\n                    break;\r\n                };\r\n\r\n                case 'reduce': {\r\n                    this.wall.removeStone(target.dataset.column);\r\n                    break;\r\n                };\r\n\r\n                case 'run-rain': {\r\n                    this.wall.rain();\r\n                    break;\r\n                }\r\n                default: break;\r\n            }\r\n            \r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n        let controlsMarkup = ``;\r\n        for (let i = 0; i < this.columnsNumber; i++) {\r\n            controlsMarkup += `\r\n        <td data-column=\"${i}\">\r\n            <button data-action=\"increase\">+</button>\r\n            <button data-action=\"reduce\">-</button>\r\n        </td>`\r\n        }\r\n        \r\n        this.controlsContainer.innerHTML = `\r\n        <table>\r\n            <tr>\r\n                ${controlsMarkup}\r\n            </tr>\r\n        </table>\r\n        <button data-action=\"run-rain\">Rain</button>\r\n    `\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/controls.js"],"sourceRoot":""}